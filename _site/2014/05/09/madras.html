<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>madras</title>
        <meta name="viewport" content="width=device-width">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/lib/css/styles.css">
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2" />
		<script src="/lib/js/jquery.js"></script>
		<script src="/lib/js/knockout-3.0.0.js"></script>
		<script src="/lib/js/jquery.fittext.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.2/raphael-min.js"></script>
    </head>
    <body>
        <div class="container">
			

	
		
			
			   <div class="site content">
<header class="post-header">
	<i class="post-header__question ion-ios7-help" data-pack="ios7" data-tags="question, information, ?"></i>
	<div class="post-header__title">
	<h1 class="title">madras</h1>
	<h3>my favorite shirt</h3>
	<p class="meta">09 May 2014</p>
	</div>
	<a href="/">back</a>
</header>
	
	<div class="post">
		<style>
body {
    background-color: #fff
}
</style>

<script>
var paper = Raphael(0,50,1000,1000);

var Madras = function(originX, originY, widthX, widthY) {
    this.originX = originX;
    this.originY = originY;
    this.widthX = widthX;
    this.widthY = widthY;    
}

Madras.prototype.colors = {
    "pink" : "#f00279",
    "teal" : "#00ab89",
    "white" : "#fff",
    "yellow" : "#ffff00"
}


Madras.prototype.init = function() {
    var stripe = new Stripe();
    
    var pink = this.colors.pink;
    var teal = this.colors.teal;
    var white = this.colors.white;
    var yellow = this.colors.yellow;
    
    // DOWN
    stripe.makeStripe("XL-V", pink);
    stripe.makeStripe("XXS-V", teal);
    stripe.makeStripe("XXS-V", white);
    stripe.makeStripe("XXS-V", teal);
    stripe.makeStripe("XXS-V", white);
    stripe.makeStripe("XXS-V", teal);
    stripe.makeStripe("XL-V", pink);
    stripe.makeStripe("S-V", teal);
    stripe.makeStripe("XXS-V", pink);
    stripe.makeStripe("XS-V", teal);
    
    // ACROSS
    stripe.makeStripe("M-H", pink);
    stripe.makeStripe("XS-H", teal);
    stripe.makeStripe("XS-H", pink);
    stripe.makeStripe("XS-H", teal);
    stripe.makeStripe("XS-H", pink);
    stripe.makeStripe("XS-H", teal);
    stripe.makeStripe("M-H", pink);
    stripe.makeStripe("XL-H", white);
    stripe.makeStripe("XS-H", yellow);
    stripe.makeStripe("XS-H", white);
    stripe.makeStripe("XS-H", yellow);
    stripe.makeStripe("XS-H", white);
    stripe.makeStripe("XS-H", yellow);
    stripe.makeStripe("M-H", white);
    stripe.makeStripe("XL-H", teal);
    stripe.makeStripe("XXS-H", white);
}


var Stripe = function() {
    this.offsetX = 0;
    this.offsetY = 0;
    this.startX = 0;
    this.startY = 0;
    this.Xcollection = [];
    this.Ycollection = [];
    this.multiplier = 2;
}

Stripe.prototype.rando = function (original) {
    
}

Stripe.prototype.makeStripe = function (readWidth, color) {
    var threads, orientation;
    var threadsLookup = [
        {
            "name" : "XXS",
            "number" : 3
        },
        {
            "name" : "XS",
            "number": 10
        },
        {
            "name" : "S",
            "number": 20
        },
        {
            "name" : "M",
            "number" : 25
        },
        {
            "name" : "L",
            "number" : 50
        },
        {
            "name" : "XL",
            "number" : 100
        }
    ]
    var cache = readWidth.split("-");
    orientation = cache[1] === "V" ? "vertical" : "horizontal";
    for(var i = 0; i < threadsLookup.length; i++) {
        if (threadsLookup[i].name === cache[0]) {
            threads = threadsLookup[i].number;
        }
    }
    var offsetX = 0;
    var offsetY = 0;
    
    if (orientation === "horizontal") {
        this.Xcollection.push(threads * this.multiplier);
        this.startX++;
        
        for (var k = 1; k < this.Xcollection.length; k++) {
            if (this.Xcollection.length === 1) {
                offsetX = 0;
            } else {

                offsetX += this.Xcollection[k-1];
            }
        }
    } else if (orientation === "vertical") {
        this.Ycollection.push(threads * this.multiplier);
        this.startY++;
        
        for (var k = 1; k < this.Ycollection.length; k++) {
            if (this.Ycollection.length === 1) {
                offsetY = 0;
            } else {
                offsetY += this.Ycollection[k-1];
            }
        }
    }
    
    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    var make;
    var m = this.multiplier;
    
    for (var j = 0; j<threads; j++) {
        
        var fix = getRandomInt(1,5);
        
        if (j%2 === 0) {
            make = orientation === "vertical" ? new Thread(orientation, 1000, offsetX + 0, offsetY + (j*m)) : new Thread(orientation, 1000, offsetX + (j*m), offsetY +  0);
        } else {
            make = orientation === "vertical" ? new Thread(orientation, 1000, offsetX + fix, offsetY + (j*m)) : new Thread(orientation, 1000, offsetX + (j*m), offsetY + fix);   
        }
        make.defaultDash(color);
    }
}

var Thread = function(direction, length, originX, originY) {
    this.direction = direction;
    this.length = length;
    this.originX = originX;
    this.originY = originY;
    this.multiplier = 4;
}

Thread.prototype.point = function (x, y) {
    return x + "," + y + ",";
}

Thread.prototype.defaultDash = function (color) {
    var x = this.originX;
    var y = this.originY;
    var tr; 
    if (this.direction === "vertical") {
        tr = this.line(this.point(x, y) + this.point(x+this.length, y));
    }
    
    if (this.direction === "horizontal") {
        tr = this.line(this.point(x, y) + this.point(x, y+this.length));
    }
    tr.attr({'stroke-dasharray': '-', 'stroke' : color, 'stroke-width' : 1});
}

Thread.prototype.line = function(lines) {
    return paper.path("M" + lines);
}

var mad = new Madras();
mad.init();
</script>

	</div>
</div>
			   
			   
		
        </div> 
		
		<script src="/lib/js/app.js"></script>
    </body>
</html>
